<% prefix = "addresses_information[#{provider.id}]" %>
<% provider.address.present? ? address = provider.address : address = Address.new %>

<h3><%= provider.name %></h3>
<p><%= "Location string: #{provider.location_string}" %>


<div>
  <%= label_tag "#{prefix}[country]", "Country" %>
  <%= render partial: "tag_relationships/simple_search_box", locals: {search_terms_list: countries, return_variable: "#{prefix}[country]"}  %>
</div>
<div>
  <%= label_tag "#{prefix}[state]", "State" %>
  <%= render partial: "tag_relationships/simple_search_box", locals: {search_terms_list: states, return_variable: "#{prefix}[state]"}  %>
</div>
<% [:street,:city,:zip].each do |string_field| %>
  <div>
    <%= label_tag "#{prefix}[#{string_field}]", string_field %>
    <%= text_field_tag "#{prefix}[#{string_field}]", address.send(string_field) %>
  </div>
<% end %>