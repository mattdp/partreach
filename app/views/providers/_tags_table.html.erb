<% provide(:title,"Tags List") %>

<div class="stylish">
  <table>
    <thead>
      <tr>
        <th>Tags</th>
        <th># suppliers</th>
        <th>last PO date</th>
        <th>latest PO supplier</th>
        <th># of POs</th>
      </tr>
    </thead>
    <tbody>
      <% @tag_details.each do |tag_name,details| %>
        <tr>
          <td><%= link_to "#{tag_name}", "#" %></td>
          <td><%= "#{details[:num_providers]}" %></td>
          <td><%= "#{details[:last_po_date]}" %></td>
          <td><%= "#{details[:last_po_provider]}" %></td>
          <td><%= "#{details[:num_pos]}" %></td>
        </tr>
      <% end %>
    </tbody>
    <tr>
      <td><%= link_to "[Add to this list]" , new_provider_with_event_path("add_provider_from_index")%></td>
    </tr>  
  </table>
</div>

<script>
  var $table = $('table'),
      process = false;

  $('.process').click(function(){
    process = !process;
    $.tablesorter.isProcessing( $table, process );
  });

  $('.sortable').click(function(){
    $table
      .find('.tablesorter-header:last').toggleClass('sorter-false')
      .trigger('update');
  });

  $table.tablesorter({
    theme: 'bootstrap',
    headerTemplate: '{content} {icon}',
    sortList: [ [2,1], [0,0] ],
    widgets : ['columns', 'uitheme', 'filter'] // add 'filter' to get the search row back
  });
</script>
